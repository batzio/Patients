<!DOCTYPE html>
<html lang="en">

<head>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patient</title>
</head>

<body>
    <center>
        <form>
            <!-- <p> -->
            <label>Privacy Information:</label>
            <br>
            <label>First and Last name:</label>
            <input type="text" id="name" required minlength="5">
            <br>
            <label>ID:</label>
            <input type="number" id="id" required minlength="8" maxlength="9">
            <br>
            <label>Address:</label>
            <input type="text" id="address">
            <br>
            <label>Date Of Birth:</label>
            <input type="date" id="dob" required>
            <br>
            <label>Phone:</label>
            <input type="number" id="phone" maxlength="9">
            <br>
            <label>Mobile Phone:</label>
            <input type="number" id="mobilePhone" required minlength="9" maxlength="10">
            <br>
            <!-- </p> -->
            <br>
            <!-- <p> -->
            <label>Details about the corona virus:</label>
            <br>
            <!-- <ul> -->
            First vaccination:
            <br>
            <label>Acceptance date:</label>
            <input type="date" id="firstAcc">
            <br>
            <label>Manufacturer:</label>
            <input type="text" id="firstManu">
            </ul>
            <ul>
                Second vaccination:
                <br>
                <label>Acceptance date:</label>
                <input type="date" id="secondAcc">
                <br>
                <label>Manufacturer:</label>
                <input type="text" id="secondManu">
            </ul>
            <ul>
                Third vaccine:
                <br>
                <label>Acceptance date:</label>
                <input type="date" id="thirdAcc">
                <br>
                <label>Manufacturer:</label>
                <input type="text" id="thirdManu">
            </ul>
            <ul>
                Fourth vaccine:
                <br>
                <label>Acceptance date:</label>
                <input type="date" id="fourthAcc">
                <br>
                <label>Manufacturer:</label>
                <input type="text" id="fourthManu">
            </ul>
            <!-- <label>Was he sick?</label> -->
            <!-- <select required>
                <option >Select answer:</option>
                <option  id="yes">Yes</option>
                <option  id="no">No</option>
            </select> -->
            <!-- <input id="sick" type="text" required> -->
            <br>
            <label>Date of receiving a positive answer:</label>
            <input type="date" id="receiveDate">
            <br>
            <label>Date of recovery from the disease:</label>
            <input type="date" id="recoverDate">
            <br>
            <!-- </p> -->
            <button type="submit" id="save" onclick="save_details()" value="Submit">Save</button>
        </form>

        <!-- <form>
            User Name: <input type="text" name="uname" id="uname" required>
            <br><br>
            <input type="submit" value="Submit">
        </form> -->

    </center>
    <script>
        // document.getElementById("save").addEventListener("click", save_details, false);
        // let flag = 0;
        // console.log("save func");
        function save_details() {
            // console.log("save func");
            // if (name.value == "" || id.value == "" || dateOsBirth.value == "" || mobile == "") {

                let name = document.getElementById("name");
                if (name.value.length < 5) {
                    alert("Min 5 characters");
                    name.value = "";
                }
                let id = document.getElementById("id");
                if (id.value.length < 8) {
                    alert("Min 8 characters");
                    id.value = "";
                }
                let address = document.getElementById("address");
                let dateOsBirth = document.getElementById("dob");
                let phone = document.getElementById("phone");
                let mobile = document.getElementById("mobilePhone");
                if (mobile.value.length < 8) {
                    alert("Min 9 characters and max 10 characters");
                    mobile.value = "";
                }

                let firstAcc = document.getElementById("firstAcc");
                let firstManu = document.getElementById("firstManu");

                let secondAcc = document.getElementById("secondAcc");
                let secondManu = document.getElementById("secondManu");

                let thirdAcc = document.getElementById("thirdAcc");
                let thirdManu = document.getElementById("thirdManu");

                let fourthAcc = document.getElementById("fourthAcc");
                let fourthManu = document.getElementById("fourthManu");

                // let yes = document.getElementById("yes");
                // let no = document.getElementById("no");


                // let IsSick = document.getElementById("sick");
                let receiveDate = document.getElementById("receiveDate");
                let recoverDate = document.getElementById("recoverDate");
            // }


            // console.log(name.value);
            // if (name.value == "") {
            //     alert("Please enter name");
            // }
            // else if (id.value == "") {
            //     alert("Please enter id");
            // }
            // else if (mobile.value == "") {
            //     alert("Please enter mobile phone");
            // }
            // else if (IsSick == "") {
            //     alert("Please enter if he was sick or not");
            // }
            // else {
            // console.log(IsSick.value);

            // if (IsSick.value == "yes") {

            //     const receiveDateLabel = document.createElement('label');
            //     document.body.appendChild(receiveDateLabel);
            //     receiveDateLabel.innerHTML = "Date of receiving a positive answer:";
            //     const receiveDate = document.createElement('input');
            //     receiveDate.setAttribute("id", "receiveDate");
            //     receiveDate.type = 'date';
            //     document.body.appendChild(receiveDate);
            //     document.createElement('br');

            //     const recoverDateLabel = document.createElement('label');
            //     document.body.appendChild(recoverDateLabel);
            //     receiveDateLabel.innerHTML = "Date of recovery from the disease:";
            //     const recoverDate = document.createElement('input');
            //     receiveDate.setAttribute("id", "recoverDate");
            //     receiveDate.type = 'date';
            //     document.body.appendChild(recoverDate);
            //     document.createElement('br');
            //     <!-- <label>Date of receiving a positive answer:</label>
            // <input type="date" id="receiveDate"> -->
            // <label>Date of recovery from the disease:</label>
            // <input type="date" id="recoverDate"> -->

            //     if (receiveDate.value != "" && recoverDate.value != "") {
            //         const new_patient = {
            //             name: name.value,
            //             id: id.value,
            //             address: address.value,
            //             dateOsBirth: dateOsBirth.value,
            //             firstAcc: firstAcc.value,
            //             phone: phone.value,
            //             mobile: mobile.value,
            //             firstAcc: firstAcc.value,
            //             firstManu: firstManu.value,
            //             secondAcc: secondAcc.value,
            //             secondManu: secondManu.value,
            //             thirdAcc: thirdAcc.value,
            //             thirdManu: thirdManu.value,
            //             fourthAcc: fourthAcc.value,
            //             fourthManu: fourthManu.value,
            //             receiveDate: receiveDate.value,
            //             recoverDate: recoverDate.value
            //         }
            //         // console.log(new_patient);
            //         // axios.post("/patient", new_patient);
            //         // flag = 1;
            //         // localStorage.setItem("name", name.value);
            //         // localStorage.setItem("id", id.value);
            //         // localStorage.setItem("flag", flag);
            //         // window.close();

            //     }
            //     else{
            //         alert("Please enter dates of receiving a positive answer and rcovery from desease.");
            //     }
            // }

            // else if (IsSick == "no") {
            //     const new_patient = {
            //         name: name.value,
            //         id: id.value,
            //         address: address.value,
            //         dateOsBirth: dateOsBirth.value,
            //         firstAcc: firstAcc.value,
            //         phone: phone.value,
            //         mobile: mobile.value,
            //         firstAcc: firstAcc.value,
            //         firstManu: firstManu.value,
            //         secondAcc: secondAcc.value,
            //         secondManu: secondManu.value,
            //         thirdAcc: thirdAcc.value,
            //         thirdManu: thirdManu.value,
            //         fourthAcc: fourthAcc.value,
            //         fourthManu: fourthManu.value
            //         // receiveDate: receiveDate.value,
            //         // recoverDate: recoverDate.value
            //     }
            // axios.post("/patient", new_pacient);
            // flag = 1;
            // localStorage.setItem("name", name.value);
            // localStorage.setItem("id", id.value);
            // localStorage.setItem("flag", flag);
            // window.close();
            // }
            // else {
            //     alert("Please write yes / no");
            // }


            const new_patient = {
                name: name.value,
                id: id.value,
                address: address.value,
                dateOsBirth: dateOsBirth.value,
                firstAcc: firstAcc.value,
                phone: phone.value,
                mobile: mobile.value,
                firstAcc: firstAcc.value,
                firstManu: firstManu.value,
                secondAcc: secondAcc.value,
                secondManu: secondManu.value,
                thirdAcc: thirdAcc.value,
                thirdManu: thirdManu.value,
                fourthAcc: fourthAcc.value,
                fourthManu: fourthManu.value,
                receiveDate: receiveDate.value,
                recoverDate: recoverDate.value
            }
            axios.post("/patient", new_patient);
            // window.close();
        }
    </script>
</body>

</html>